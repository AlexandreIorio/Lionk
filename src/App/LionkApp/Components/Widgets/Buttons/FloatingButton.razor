@rendermode InteractiveServer
@inject IDialogService DialogService
@using Lionk.Core.Razor.Components
@using Lionk.Core.View
@using LionkApp.Components.Widgets.Dialogs
@using Lionk.Core

<MudFab @onclick="OpenDialogAsync" Color="Color.Secondary" StartIcon="@Icons.Material.Filled.Add" Size="Size.Large" Style="position: fixed; bottom: 20px; right: 20px;" />

@code {

    [Parameter] public EventCallback<Tuple<string, ComponentViewDescription>>NewWidgetAvailable { get; set; }

    private async Task OpenDialogAsync()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true, FullWidth = true };
        var parameters = new DialogParameters();
        var dialog = DialogService.Show<WidgetAdder>("Widget selection", parameters, options);
        var result = await dialog.Result;

        if (result is not null && !result.Canceled)
        {
            await NewWidgetAvailable.InvokeAsync();
        }
    }
}
