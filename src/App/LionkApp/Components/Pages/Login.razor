@page "/login"

<h3>Login</h3>

<MudPaper Class="pa-4 mx-auto" MaxWidth="400px">
    <MudText Typo="Typo.h6">Connexion</MudText>
    <MudForm @ref="Form">
        <MudTextField @bind-Value="Email" Label="Email" Required="true" InputType="InputType.Email" />
        <MudTextField @bind-Value="Password" Label="Mot de passe" Required="true" InputType="InputType.Password" />
        <MudButton Color="Color.Primary" Variant="Variant.Filled" ButtonType="ButtonType.Submit" OnClick="HandleValidSubmit">Se connecter</MudButton>
    </MudForm>
    <MudText Color="Color.Error" Typo="Typo.caption">@ErrorMessage</MudText>
</MudPaper>

@code {
    private MudForm? Form;

    public string? Email { get; set; }
    public string? Password { get; set; }
    public string? ErrorMessage { get; set; }

    [Inject] private NavigationManager? Navigation { get; set; }

    private void HandleValidSubmit()
    {
        if (Email == "toto@gmail.com" && Password == "toto")
        {
            Navigation?.NavigateTo("/dashboard");
        }
        else
        {
            ErrorMessage = "Email ou mot de passe incorrect.";
        }
    }
}
