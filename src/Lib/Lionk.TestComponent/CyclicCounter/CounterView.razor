@using Lionk.Core
@using Lionk.Core.View
@using MudBlazor
@using System.ComponentModel
@namespace Lionk.TestComponent.CyclicCounter

@attribute [ViewOf("Counter view", typeof(Counter), typeof(CounterView), ViewContext.Widget)]
<MudIcon Icon="@Icons.Material.Filled.Numbers">
    <MudText Typo="Typo.h6">@Component?.InstanceName</MudText>
</MudIcon>
<MudText Typo="Typo.h6">Counter: @Component?.CounterValue</MudText>

@code {
    [Parameter] public Counter? Component { get; set; }

    protected override void OnInitialized()
    {
        if (Component is not null)
            Component.PropertyChanged += ModelChange;
    }

    private void ModelChange(object? sender, PropertyChangedEventArgs e)
    {
        InvokeAsync(StateHasChanged);
    }
}
