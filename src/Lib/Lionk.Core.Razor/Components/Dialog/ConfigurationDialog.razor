@using MudBlazor
@using System.Reflection
@namespace Lionk.Core.Component.Dialog

<MudDialog>
    <DialogContent>
        <DynamicComponent Type="ConfigType" Parameters="_parameter" />
    </DialogContent>
    <DialogActions>
        <MudSpacer/>
        <MudButton OnClick="Submit">Save</MudButton>
        <MudButton OnClick="Cancel">Cancel</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance? MudDialog { get; set; }

    [Parameter] public object? Component { get; set; }
    [Parameter] public Type? ConfigType { get; set; }
    private Dictionary<string, object> _parameter = new Dictionary<string, object>();


    protected override void OnInitialized()
    {
        if (Component is null) return;
        _parameter.Add("Component", Component);
    }


    private void Submit()
    {
        if (MudDialog is null) return;
        MudDialog.Close(DialogResult.Ok(new { Component }));
    }

    private void Cancel()
    {
        if (MudDialog is null) return;
        MudDialog.Cancel();
    }
}
