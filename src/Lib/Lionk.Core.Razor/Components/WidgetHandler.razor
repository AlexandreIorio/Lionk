@using Lionk.Core.Component
@inject IComponentService ComponentService

<MudDialog>
    <DialogContent>
        <IComponentInstanceList Components="_components" />
    </DialogContent>
    <DialogActions>
        <MudSpacer />
        <MudButton OnClick="Submit">Save</MudButton>
        <MudButton OnClick="Cancel">Cancel</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance? MudDialog { get; set; }
    private List<Widget> _components => ComponentService.GetInstancesOfType<Widget>().ToList();

    private void Submit()
    {
        if (MudDialog is null) return;
        MudDialog.Close(DialogResult.Ok(new { _components }));
    }

    private void Cancel()
    {
        if (MudDialog is null) return;
        MudDialog.Cancel();
    }
}
