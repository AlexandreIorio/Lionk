@using Lionk.Core.Component
@using MudBlazor

@if (Component is not null)
{
    <div class="component-card">
        <MudCard Style="@($"background-color:{BackgroundColor};")">
            <MudCardContent>
                <MudText Typo="Typo.h6">@Component.InstanceName</MudText>
                <MudText Typo="Typo.body2">Last Execution: @Component.LastExecution</MudText>
                <MudText Typo="Typo.body2">Next Execution: @Component.NextExecution</MudText>
                <MudText Typo="Typo.body2">Period: @Component.Period</MudText>
                <MudText Typo="Typo.body2">Cycle Count: @Component.NbCycle</MudText>
            </MudCardContent>
            <MudCardActions>
                @if (Component.IsInError)
                {
                    <MudButton Color="Color.Error" Variant="Variant.Outlined" OnClick="ResetComponent">Reset</MudButton>
                }
            </MudCardActions>
        </MudCard>
    </div>
}

@code {
    /// <summary>
    /// The component to display.
    /// </summary>
    [Parameter]
    public ICyclicComponent? Component { get; set; }

    private string BackgroundColor => Component?.IsInError == true ? "red" : "white";

    private void ResetComponent()
        => Component?.Reset();
}